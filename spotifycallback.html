<!DOCTYPE html>
<html>
<head>
  <title>Spotify Callback</title>
</head>
<body>
  <script>
    // Parse the access token from the URL hash
    const hash = window.location.hash.substring(1);
    const params = new URLSearchParams(hash);
    const accessToken = params.get('access_token');
    const expiresIn = params.get('expires_in');

    if (accessToken && expiresIn) {
      // Store token and expiry in localStorage
      localStorage.setItem('spotify_access_token', accessToken);
      localStorage.setItem('spotify_token_expiry', Date.now() + parseInt(expiresIn) * 1000);

      // Redirect back to your main app (index.html)
      window.location.href = 'https://swreese.github.io/nf-ranks-api/';
    } else {
      document.body.innerHTML = '<p>Error: No access token found. Please try again.</p>';
    }
  </script>
</body>
</html>
